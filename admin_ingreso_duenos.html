1. El Bot√≥n (HTML)
Busca la l√≠nea 130 (donde est√° el bot√≥n azul de "Modificar ficha"). Vamos a a√±adir el bot√≥n dorado justo despu√©s. Aseg√∫rate de que quede dentro del div que se muestra tras el login:

HTML

<div class="flex flex-wrap gap-4 justify-center my-6">
    <a id="link-modificar" href="#" target="_blank" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm transition-all shadow-lg font-bold">
        ‚öôÔ∏è MODIFICAR LOS DATOS DE MI FICHA COMERCIAL
    </a>
    
    <button onclick="abrirInvitacionesVIP()" class="bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg text-sm transition-all shadow-lg font-bold border border-yellow-400">
        ‚ú® Invitaciones VIP de cortes√≠a
    </button>
</div>
2. El Modal Invisible (HTML)
Para que no aparezca en el login, pega este c√≥digo al final de tu archivo, justo antes de la etiqueta </body>. Estar√° oculto por defecto:

HTML

<div id="modal-invitaciones" class="fixed inset-0 bg-black bg-opacity-90 hidden items-center justify-center z-[100] p-4 backdrop-blur-sm">
    <div class="bg-gray-900 border-2 border-yellow-500 rounded-2xl max-w-md w-full p-6 relative shadow-2xl">
        <button onclick="cerrarInvitaciones()" class="absolute top-4 right-4 text-gray-400 hover:text-white text-2xl">&times;</button>
        
        <div class="text-center mb-6">
            <h2 class="text-2xl font-bold text-yellow-500">¬°Felicidades! ‚ú®</h2>
            <p class="text-sm text-gray-300 mt-2">
                Como beneficio exclusivo de <b>Habitat-Car</b>, tienes 10 pases VIP de cortes√≠a para regalar.
            </p>
        </div>

        <div id="lista-invitaciones" class="space-y-2 overflow-y-auto max-h-[50vh] pr-2">
            </div>

        <button onclick="cerrarInvitaciones()" class="w-full mt-6 bg-gray-800 text-white py-3 rounded-xl font-bold border border-gray-600">
            Volver al Panel
        </button>
    </div>
</div>
3. La L√≥gica (JavaScript)
A√±ade estas funciones al final de tu <script>, antes de que cierre </script>. He programado la funci√≥n para que use el idComercio que el usuario acaba de escribir en el login para entrar:

JavaScript

window.abrirInvitacionesVIP = async () => {
    // Obtenemos el ID que el due√±o ya valid√≥ en el login
    const idComercio = document.getElementById('id-comercio').value.trim();
    if(!idComercio) return; 

    // Mostramos el modal
    document.getElementById('modal-invitaciones').classList.replace('hidden', 'flex');
    const lista = document.getElementById('lista-invitaciones');
    lista.innerHTML = '<p class="text-center text-yellow-500">Cargando tus beneficios...</p>';

    try {
        // Consultamos solo los tokens de ESTE comercio
        const q = query(collection(db, "tokens_vip"), where("comercioId", "==", idComercio), where("tipo", "==", "cortesia_dueno"));
        const snap = await getDocs(q);
        let tokens = snap.docs.map(doc => ({id: doc.id, ...doc.data()}));

        // Si es la primera vez, generamos los 10 autom√°ticamente
        if (tokens.length === 0) {
            for (let i = 1; i <= 10; i++) {
                const nToken = "VIP-" + Math.random().toString(36).substr(2, 5).toUpperCase() + "-" + idComercio.substring(0,3).toUpperCase();
                await addDoc(collection(db, "tokens_vip"), {
                    token: nToken,
                    comercioId: idComercio,
                    estado: 'disponible',
                    tipo: 'cortesia_dueno',
                    fechaCreacion: Date.now()
                });
            }
            return abrirInvitacionesVIP(); 
        }

        // Renderizamos la lista
        lista.innerHTML = '';
        tokens.forEach((t, i) => {
            const link = `https://habitatcar.github.io/registro.html?token=${t.token}`;
            const usado = t.estado !== 'disponible';
            
            lista.innerHTML += `
                <div class="flex items-center justify-between bg-black bg-opacity-40 p-3 rounded-lg border border-gray-700 mb-2">
                    <div class="flex flex-col text-left">
                        <span class="text-[9px] text-gray-500 font-bold tracking-tighter uppercase">PASE ${i+1}</span>
                        <span class="text-[11px] ${usado ? 'text-red-500' : 'text-green-400'} font-bold">
                            ${usado ? 'üî¥ YA USADO' : 'üü¢ DISPONIBLE'}
                        </span>
                    </div>
                    <button onclick="copiarLinkPase('${link}')" 
                            ${usado ? 'disabled' : ''}
                            class="${usado ? 'bg-gray-800 text-gray-600' : 'bg-yellow-600 text-white'} px-3 py-2 rounded text-[10px] font-bold">
                        ${usado ? 'CANJEADO' : 'COPIAR PARA INVITAR'}
                    </button>
                </div>`;
        });
    } catch (e) { console.error(e); }
};

window.cerrarInvitaciones = () => {
    document.getElementById('modal-invitaciones').classList.replace('flex', 'hidden');
};

window.copiarLinkPase = (link) => {
    navigator.clipboard.writeText(link).then(() => {
        alert("¬°Copiado! Ya puedes enviarlo.");
    });
};

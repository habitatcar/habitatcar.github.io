1. El Panel de B칰squeda y Filtros
Busc치 la secci칩n que empieza con <div class="search-container"> (aprox. l칤nea 141) y reemplazala exactamente por esto para incluir los contadores y el reseteo:

HTML

    <div class="search-container">
        <div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center;">
            <input type="text" id="buscador" placeholder="Buscar..." onkeyup="filtrarVips()" style="width:150px;">
            
            <select id="filtro-pais" onchange="filtrarVips()">
                <option value="">Pa칤s: Todos</option>
            </select>
            <select id="filtro-provincia" onchange="filtrarVips()">
                <option value="">Provincia: Todas</option>
            </select>
            <select id="filtro-localidad" onchange="filtrarVips()">
                <option value="">Localidad: Todas</option>
            </select>
            
            <div class="stats-mini" style="display:flex; gap:10px; font-size:0.9em; color:var(--oro);">
                <span>Pa칤s: <b id="count-pais">0</b></span>
                <span>Prov: <b id="count-prov">0</b></span>
                <span>Loc: <b id="count-loc">0</b></span>
            </div>
        </div>

        <div style="display:flex; gap:10px;">
            <select id="tipo-reseteo" style="padding:5px; border-radius:5px; background:var(--azul-medio); color:white; border:1px solid var(--oro);">
                <option value="">Restablecer Cupones...</option>
                <option value="localidad">Por Localidad</option>
                <option value="provincia">Por Provincia</option>
                <option value="pais">Por Pa칤s (TODO)</option>
            </select>
            <button class="btn-oro" onclick="ejecutarReseteoMasivo()">Ejecutar Reset</button>
        </div>
    </div>
2. Los Encabezados de la Tabla
En la l칤nea 161 aprox., agreg치 las 3 columnas nuevas en el <thead>:

HTML

            <thead>
                <tr>
                    <th>Nombre y Apellido</th>
                    <th>WhatsApp</th>
                    <th>Provincia</th> <th>Ciudad</th>    <th>Cant. Usos</th> <th>Detalle por Comercio</th>
                    <th>Estado</th>
                    <th>Acciones</th>
                </tr>
            </thead>
3. La L칩gica Interna de Renderizado
Busc치 la funci칩n window.renderizar (l칤nea 195 aprox.) y reemplazala para que dibuje las 3 columnas y el desglose de comercios:

JavaScript

        window.renderizar = (lista) => {
            const cuerpo = document.getElementById('cuerpo-tabla');
            cuerpo.innerHTML = "";
            lista.forEach(v => {
                const id = v.id;
                const apellido = v.apellido || "";
                const nombres = v.nombres || "";
                const whatsapp = v.whatsapp || "";
                const estado = v.estado || "activo";
                const provincia = v.provincia || "-";
                const ciudad = v.localidad || "-";
                const cantUsos = v.usos_count || 0;

                let detalleComercios = "";
                Object.keys(v).forEach(key => {
                    if (v[key] && typeof v[key] === 'object' && v[key].usos !== undefined) {
                        detalleComercios += `<span style="display:inline-block; background:rgba(255,193,7,0.1); border:1px solid var(--oro); padding:2px 5px; border-radius:3px; font-size:0.8em; margin:2px;">${key}: ${v[key].usos}</span>`;
                    }
                });

                const fila = document.createElement('tr');
                fila.innerHTML = `
                    <td>${apellido}, ${nombres}</td>
                    <td>${whatsapp}</td>
                    <td>${provincia}</td>
                    <td>${ciudad}</td>
                    <td><b style="color:var(--oro)">${cantUsos}</b></td>
                    <td>${detalleComercios || "-"}</td>
                    <td><span class="estado-${estado}">${estado.toUpperCase()}</span></td>
                    <td class="acciones">
                        <button class="btn-oro" onclick="restablecer('${id}', '${apellido}', '${nombres}')">游댃</button>
                        <button class="btn-azul" onclick="toggleEstado('${id}', '${estado}', '${apellido} ${nombres}')">游뛂</button>
                        <button class="btn-rojo" onclick="bajaVip('${id}', '${apellido}', '${nombres}')">游늴</button>
                    </td>
                `;
                cuerpo.appendChild(fila);
            });
        };
4. La L칩gica de Filtros y Reseteo Masivo
Peg치 estas funciones al final de tu <script> antes de la 칰ltima llave:

JavaScript

        window.filtrarVips = () => {
            const b = document.getElementById('buscador').value.toLowerCase();
            const pais = document.getElementById('filtro-pais').value;
            const prov = document.getElementById('filtro-provincia').value;
            const loc = document.getElementById('filtro-localidad').value;

            const filtrados = todosLosVips.filter(v => {
                const mBusqueda = (v.apellido && v.apellido.toLowerCase().includes(b)) || (v.whatsapp && v.whatsapp.includes(b));
                const mPais = !pais || v.pais === pais;
                const mProv = !prov || v.provincia === prov;
                const mLoc = !loc || v.localidad === loc;
                return mBusqueda && mPais && mProv && mLoc;
            });

            document.getElementById('count-pais').innerText = pais ? todosLosVips.filter(v => v.pais === pais).length : 0;
            document.getElementById('count-prov').innerText = prov ? todosLosVips.filter(v => v.provincia === prov).length : 0;
            document.getElementById('count-loc').innerText = loc ? todosLosVips.filter(v => v.localidad === loc).length : 0;

            renderizar(filtrados);
        };

        window.ejecutarReseteoMasivo = async () => {
            const tipo = document.getElementById('tipo-reseteo').value;
            if(!tipo) return alert("Seleccion치 un nivel de reseteo (Localidad, Provincia o Pa칤s)");
            
            const pass = prompt("CONTRASE칌A ADMIN REQUERIDA:");
            if(pass !== "admin1234") return alert("Contrase침a incorrecta.");

            let seleccion = [];
            if(tipo === "pais") seleccion = todosLosVips;
            if(tipo === "provincia") seleccion = todosLosVips.filter(v => v.provincia === document.getElementById('filtro-provincia').value);
            if(tipo === "localidad") seleccion = todosLosVips.filter(v => v.localidad === document.getElementById('filtro-localidad').value);

            if(seleccion.length === 0) return alert("No hay Vips en la selecci칩n actual.");

            if(confirm(`Restablecer cupones de ${seleccion.length} usuarios?`)){
                const batch = writeBatch(db);
                seleccion.forEach(v => {
                    const vRef = doc(db, "vips", v.id);
                    let clean = { usos_count: 0, cupones_detallados: [] };
                    Object.keys(v).forEach(k => { if(v[k] && v[k].usos !== undefined) clean[k] = deleteField(); });
                    batch.update(vRef, clean);
                });
                await batch.commit();
                alert("Reseteo completado con 칠xito.");
            }
        };
